(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[891],{594:(e,s,r)=>{"use strict";r.d(s,{A:()=>_});var a=r(7876),l=r(9955),t=r(8061),n=r(4836),o=r(9803),i=r(1921),c=r(485),d=r(9736),u=r(5812),h=r(8387),x=r(8745),p=r(9035),j=r(1626),m=r(3642),g=r(4306),f=r(2897),b=r(2426),S=r(5018),w=r(5539),v=r(6078),y=r(1362),C=r(8615),k=r(9099),A=r(6534);function E(){let e=(0,k.useRouter)(),s=(0,A.A)(e=>e.logout),{colorMode:r,toggleColorMode:E}=(0,t.G6)(),_=(0,t.dU)("white","gray.900"),I=(0,t.dU)("gray.200","gray.700"),{isOpen:z,onOpen:R,onClose:$}=(0,n.j)(),U=()=>{localStorage.removeItem("token"),s(),e.replace("/login")};return(0,a.jsxs)(l.a,{as:"header",px:4,mt:5,zIndex:10,children:[(0,a.jsx)(l.a,{bg:_,borderRadius:"full",boxShadow:"lg",border:"1px solid",borderColor:I,px:6,py:4,maxW:"6xl",mx:"auto",children:(0,a.jsxs)(o.s,{align:"center",justify:"space-between",wrap:"wrap",children:[(0,a.jsx)(i.E,{fontSize:{base:"lg",md:"xl"},fontWeight:"bold",color:"blue.500",children:"ReceitaWs"}),(0,a.jsx)(c.K,{"aria-label":"Abrir menu",icon:(0,a.jsx)(C.ND1,{}),display:{base:"inline-flex",md:"none"},onClick:R,variant:"ghost"}),(0,a.jsxs)(d.z,{spacing:6,display:{base:"none",md:"flex"},children:[(0,a.jsx)(u.$,{leftIcon:(0,a.jsx)(C.qYx,{}),variant:"ghost",onClick:()=>e.push("/empresa"),colorScheme:"blue",children:"Empresas"}),(0,a.jsx)(u.$,{leftIcon:(0,a.jsx)(C.cfS,{}),variant:"ghost",onClick:()=>e.push("/usuarios"),colorScheme:"purple",children:"Usu\xe1rios"})]}),(0,a.jsxs)(d.z,{spacing:4,display:{base:"none",md:"flex"},children:[(0,a.jsxs)(o.s,{align:"center",gap:2,children:[(0,a.jsx)(h.I,{as:"light"===r?C.Wh$:C.hkc,color:"light"===r?"yellow.500":"blue.300",boxSize:5}),(0,a.jsx)(x.d,{isChecked:"dark"===r,onChange:E,colorScheme:"yellow","aria-label":"Alternar modo de cor"})]}),(0,a.jsxs)(p.W,{children:[(0,a.jsx)(j.I,{as:c.K,"aria-label":"Abrir configura\xe7\xf5es",icon:(0,a.jsx)(C.VSk,{}),variant:"outline",size:"md"}),(0,a.jsx)(m.c,{children:(0,a.jsx)(g.D,{icon:(0,a.jsx)(h.I,{as:C.QeK,color:"red.500"}),onClick:U,children:"Sair"})})]})]})]})}),(0,a.jsxs)(f._s,{isOpen:z,placement:"right",onClose:$,children:[(0,a.jsx)(b.m,{}),(0,a.jsxs)(S.z,{bg:_,children:[(0,a.jsx)(w.s,{}),(0,a.jsx)(v.c,{mt:10,children:(0,a.jsxs)(y.T,{spacing:6,align:"start",children:[(0,a.jsx)(u.$,{leftIcon:(0,a.jsx)(C.qYx,{}),variant:"ghost",colorScheme:"blue",onClick:()=>{e.push("/empresa"),$()},children:"Empresas"}),(0,a.jsx)(u.$,{leftIcon:(0,a.jsx)(C.cfS,{}),variant:"ghost",colorScheme:"purple",onClick:()=>{e.push("/usuarios"),$()},children:"Usu\xe1rios"}),(0,a.jsxs)(o.s,{align:"center",gap:3,w:"full",justifyContent:"flex-start",children:[(0,a.jsx)(h.I,{as:"light"===r?C.Wh$:C.hkc,color:"light"===r?"yellow.500":"blue.300",boxSize:5,marginLeft:4}),"Dark Mode",(0,a.jsx)(x.d,{isChecked:"dark"===r,onChange:E,colorScheme:"yellow",size:"lg","aria-label":"Alternar modo de cor"})]}),(0,a.jsx)(u.$,{leftIcon:(0,a.jsx)(C.QeK,{}),colorScheme:"red",variant:"ghost",onClick:U,children:"Sair"})]})})]})]})]})}function _(e){let{children:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E,{}),(0,a.jsx)(l.a,{as:"main",p:8,children:s})]})}},1234:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/usuarios",function(){return r(6223)}])},3899:(e,s,r)=>{"use strict";r.d(s,{A:()=>n});var a=r(1040),l=r(5364);let t=a.A.create({baseURL:l.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:5000",headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{let s=localStorage.getItem("jwtToken")||sessionStorage.getItem("jwtToken");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,e=>{var s;return(null==(s=e.response)?void 0:s.status)===401&&(localStorage.clear(),sessionStorage.clear(),window.location.href="/auth/login"),Promise.reject(e)});let n=t},6223:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>I});var a=r(7876),l=r(4232),t=r(9099),n=r(6534),o=r(594),i=r(6044),c=r(9461);let d=(0,i.B)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});d.displayName="Center";let u={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};(0,c.R)(function(e,s){let{axis:r="both",...l}=e;return(0,a.jsx)(i.B.div,{ref:s,__css:u[r],...l,position:"absolute"})});var h=r(851),x=r(1921),p=r(2736),j=r(1362),m=r(3899);async function g(e){let{data:s}=await m.A.post("/api/Auth/register",e);return s}async function f(e,s){let{data:r}=await m.A.put("/api/Auth/Update?id=".concat(e),s);return r}async function b(){let{data:e}=await m.A.get("/api/Auth/GetAll");return Array.isArray(e)?e:e.users}async function S(e){let{data:s}=await m.A.delete("/api/Auth/".concat(e));return s}let w=()=>{let[e,s]=(0,l.useState)([]),[r,a]=(0,l.useState)(!0),[t,n]=(0,l.useState)(null),[o,i]=(0,l.useState)({username:"",email:"",password:"",role:""}),c=(0,l.useCallback)(async()=>{a(!0);try{let e=await b();s(e)}finally{a(!1)}},[]),d=()=>{i({username:"",email:"",password:"",role:""}),n(null)},u=async()=>{t?await f(t,o):await g(o),await c(),d()},h=async e=>{await S(e),await c()};return(0,l.useEffect)(()=>{c()},[c]),{users:e,loading:r,form:o,editingId:t,setForm:i,handleSave:u,handleEdit:e=>{n(e.id),i({...e,password:""})},handleDelete:h,resetForm:d}};var v=r(9955),y=r(5727),C=r(6491),k=r(9803),A=r(5812);let E=e=>{let{form:s,isEditing:r,onChange:l,onSave:t,onCancel:n}=e;return(0,a.jsx)(v.a,{p:4,border:"1px solid",borderRadius:"md",children:(0,a.jsxs)(y.B,{spacing:3,children:[(0,a.jsx)(C.p,{placeholder:"Username",value:s.username,onChange:e=>l("username",e.target.value)}),(0,a.jsx)(C.p,{placeholder:"Email",type:"email",value:s.email,onChange:e=>l("email",e.target.value)}),(0,a.jsx)(C.p,{placeholder:"Senha",type:"password",value:s.password,onChange:e=>l("password",e.target.value)}),(0,a.jsx)(C.p,{placeholder:"Role",value:s.role,onChange:e=>l("role",e.target.value)}),(0,a.jsxs)(k.s,{gap:3,children:[(0,a.jsx)(A.$,{colorScheme:"blue",onClick:t,children:r?"Salvar":"Cadastrar"}),(0,a.jsx)(A.$,{variant:"ghost",onClick:n,children:"Cancelar"})]})]})})},_=e=>{let{user:s,onEdit:r,onDelete:l}=e;return(0,a.jsxs)(v.a,{p:4,border:"1px solid",borderRadius:"md",children:[(0,a.jsx)(x.E,{fontWeight:"bold",children:s.username}),(0,a.jsx)(x.E,{children:s.email}),(0,a.jsxs)(x.E,{children:["Role: ",s.role]}),(0,a.jsxs)(k.s,{mt:3,gap:2,children:[(0,a.jsx)(A.$,{size:"sm",onClick:()=>r(s),children:"Editar"}),(0,a.jsx)(A.$,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>l(s.id),children:"Excluir"})]})]})};function I(){let{token:e}=(0,n.A)(),s=(0,t.useRouter)(),[r,i]=(0,l.useState)(!0),{users:c,loading:u,form:m,editingId:g,setForm:f,handleEdit:b,handleDelete:S,handleSave:v,resetForm:y}=w();return((0,l.useEffect)(()=>{e?i(!1):s.replace("/login")},[e,s]),r)?(0,a.jsxs)(d,{minH:"100vh",children:[(0,a.jsx)(h.y,{size:"lg"}),(0,a.jsx)(x.E,{ml:4,children:"Verificando sess\xe3o..."})]}):(0,a.jsxs)(o.A,{children:[(0,a.jsx)(p.D,{mb:6,children:"Usu\xe1rios"}),(0,a.jsx)(E,{form:m,isEditing:!!g,onChange:(e,s)=>f(r=>({...r,[e]:s})),onSave:v,onCancel:y}),u?(0,a.jsx)(h.y,{mt:6}):(0,a.jsx)(j.T,{spacing:4,mt:6,children:c.map(e=>(0,a.jsx)(_,{user:e,onEdit:b,onDelete:S},e.id))})]})}},6534:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(8106).v)(e=>({token:null,user:null,setAuth:(s,r)=>{localStorage.setItem("token",s),e({token:s,user:r})},logout:()=>{localStorage.removeItem("token"),e({token:null,user:null})}}))}},e=>{var s=s=>e(e.s=s);e.O(0,[141,158,156,636,593,792],()=>s(1234)),_N_E=e.O()}]);